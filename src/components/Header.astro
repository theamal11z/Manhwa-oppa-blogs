---
import HeaderLink from './HeaderLink.astro';
import { SITE_TITLE, getTitle } from '../consts';

const dynamicTitle = await getTitle();
---

<header class="fixed top-0 w-full z-40 transition-all duration-300 bg-black/90 backdrop-blur-sm shadow-lg">
	<div class="max-w-7xl mx-auto px-3 sm:px-6 lg:px-8">
		<nav class="flex items-center justify-between h-14 sm:h-16">
			<a href="/" class="flex items-center manga-border bg-red-500 px-3 py-1 sm:px-4 sm:py-2 transform -rotate-2">
				<span class="ml-1 sm:ml-2 text-lg sm:text-xl manga-title">{dynamicTitle}</span>
			</a>
			
			<div class="hidden md:flex items-center space-x-4">
				<HeaderLink href="/">Home</HeaderLink>
				<HeaderLink href="/blog">Blog</HeaderLink>
				<HeaderLink href="/discover">Discover</HeaderLink>
				<HeaderLink href="/about">About</HeaderLink>
				
				
				<!-- Links to main Manga-Oppa site -->
				<a href="/../../" class="manga-border px-4 py-2 hover:text-red-500 transition-all transform hover:scale-105 hover:-rotate-2 flex items-center gap-2">
					Main Site
				</a>
				
			</div>
			
			<button
				id="menu-toggle"
				class="md:hidden manga-border p-3 sm:p-4 transform hover:rotate-3 transition-transform menu-button focus:outline-none"
				aria-label="Open navigation menu"
				aria-controls="mobile-menu"
				aria-expanded="false"
			>

				<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
				</svg>
			</button>
		</nav>
	</div>
	
	<!-- Mobile Menu as Dialog -->
	<dialog id="mobile-menu" class="md:hidden fixed inset-0 bg-black/95 z-50 pt-20 sm:pt-24 mobile-menu p-0 rounded-none border-0 max-w-none w-full h-full overflow-y-auto">
		<div class="p-4 space-y-4 max-h-screen overflow-y-auto pb-32">
			<a href="/" class="block manga-panel py-3 px-4 hover:text-red-500 transition-colors transform hover:-rotate-2 text-center text-lg">
				Home
			</a>
			<a href="/blog" class="block manga-panel py-3 px-4 hover:text-red-500 transition-colors transform hover:rotate-2 text-center text-lg">
				Blog
			</a>
			<a href="/discover" class="block manga-panel py-3 px-4 hover:text-red-500 transition-colors transform hover:-rotate-2 text-center text-lg">
				Discover
			</a>
			
			<a href="/about" class="block manga-panel py-3 px-4 hover:text-red-500 transition-colors transform hover:-rotate-2 text-center text-lg">
				About
			</a>
			<!-- Links to main Manga-Oppa site -->
			<a href="/../../" class="block manga-panel py-3 px-4 hover:text-red-500 transition-colors transform hover:rotate-2 text-center text-lg">
				Main Site
			</a>
			
			<button 
				id="close-menu"
				class="block w-full manga-panel py-4 px-4 hover:text-red-500 transition-colors transform hover:-rotate-2 flex items-center justify-center gap-2 mt-10 text-lg"
				aria-label="Close navigation menu"
				type="button"
			>
				<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
				</svg>
				Close
			</button>
		</div>
	</dialog>
</header>

<div class="fixed inset-0 screen-tone pointer-events-none"></div>

<script is:inline type="module" client:load>
  import '/src/scripts/mobile-nav.js';
</script>
